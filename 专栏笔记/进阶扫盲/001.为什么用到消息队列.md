#### 消息队列作用

1. 解耦
   - A 系统发送个数据到 BCD 三个系统
   - 现在 E 系统也要这个数据, 但是 B 系统不需要这个数据了
   - A 系统要时时刻刻考虑 BCDE 系统挂了怎么办, 是不是要把消息存起来
   - 调用了多个模块,互相之间的调用很复杂,维护起来很复杂,且不需要直接同步调用接口,如果用 MQ 直接异步化解耦也是可以的
2. 异步
   - A 系统接受一个请求,在自己本地写库20ms,还需要在 BCD 三个系统写库分别 300ms,400ms,200ms,最终请求时间则要相加,接近 1 秒, 用户有明显停顿感
   - 异步的话,只需将消息发送到 MQ,然后就可以返回
3. 削峰
   - 高峰期请求过多, 如果直接调用, MySQL 请求可能最多处理两千个,直接将 MySQL 打死
   - 系统直接崩溃
   - 使用 MQ 就先保存在队列中, MySQL 保持每秒处理 2000 个,在高峰期过后,MQ 中的消息会逐步处理完毕

#### 消息队列缺点

1. 系统可用性降低
   - MQ 一旦故障
   - 系统 A 无法发送消息到 MQ
   - 系统 BCD 无法消费信息
   - 整套系统直接崩溃
2. 系统复杂性提高
   - 消息重复消费
   - 消息积压
   - 消息顺序性
   - 消息一致性问题: 消息只 BC 系统处理但 D 未处理就直接返回了

#### kafka activemq rabbitmq rocketmq优缺点

1. ActiveMQ
   - 万级
   - ms 级
   - 较低丢失消息
   - 非常成熟
   - 应用少,维护少,官方维护少,不活跃
2. RabbitMQ
   - 万级
   - 微妙级,延迟低(消息中间停留时间)
   - 不丢
   - 性能好
   - 社区活跃
   - 官方更新快
   - 管理界面,功能比较完备
   - erlang 语言开发, 语言在国内比较小众
3. RocketMQ
   - 10 万级
   - ms 级
   - 可以配置到 0 丢失
   - 阿里开源,支持分布式
   - Java 源码
   - 社区相对活跃
   - 支撑大规模请求
   - 官方放弃,项目会黄掉
4. kafka
   - 10万级
   - 简单 topic
   - 功能较少
   - 吞吐量高
   - 分布式任意扩展
   - 社区活跃高
   - 适合大数据
   - 可能消息重复消费