---
title: 交易系统设置jvm堆内存大小
tags:
  - jvm
  - jvm分析
categories:
  - jvm
  - 实战笔记
keywords: 内存分配
date: 2019-07-11
updated: 2019-10-31
description: 
top_img:

---

支付核心业务流程:

主要核心压力来自支付订单
系统每秒钟需要处理多少笔支付订单
高峰期几个小时
100 万 ===> 几个小时   平均每秒 100 笔订单
部署了三台机器,每台机器每秒 30 笔支付订单

支付请求=创建订单对象-填充数据-写入数据库-其他
一个请求,一个订单,大概一秒钟
一秒钟 30 笔 ----JVM 新生代创建 30 个支付订单,并写入了数据库
一秒钟后-30 个订单处理完毕-支付订单对象的引用被回收
重复以上
Integer --- 4 个字节
Long --- 8个字节
20 个实例变量, 一个对象几百个字节
30 个支付订单  ---  30 * 500 字节 = 15000 字节, 15KB
每秒 扩大 10~20 倍  几百 KB~1MB
频繁触发 GC 一定不是好事
新生代 2 G ===>> 半小时到一小时才会让新生代触发 GC