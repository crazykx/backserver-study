---
title: jvm栈内存与永久代的大小
tags:
  - jvm
  - 栈内存
  - 永久代
categories:
  - jvm
  - 实战笔记
keywords: 
date: 2019-07-12
updated: 2019-10-31
description: 
top_img:

---

大促活动 === > 瞬间访问量增加十倍

每秒过来 1000 笔交易 === 压力骤增,系统性能下降, 出现每个请求处理完毕需要几秒钟, 甚至几十秒
新生代 === 积压了很多的数据 ==> minor GC回收几次后,逐渐转移到老年代
老年代垃圾回收速度很慢

新生代内存不充足,导致很多对象不停的迁移到老年代去,最后导致老年代也要不停的进行垃圾回收

支付系统内存设置过小,突发巨大的流量压力, 突发的性能抖动, 导致很多对象长期在新生代被人引用, 无法被回收, 最后进入老年代, 最后触发老年代内存频繁占满, 老年代频繁被垃圾回收

永久代大小: 存放类饭类的信息  几百兆

栈内存大小:默认 512KB 到 1MB
每个线程自己的栈内存空间 ===> 用来存放线程执行方法期间的各种局部变量

stop the world: 标记清除, --回收时又有其他指向了它, 出现回收了不该回收的对象 ===> 执行到安全点 ===> 重新 从 root 开始重建关系网


